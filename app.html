<!DOCTYPE html>
<html lang="en">

<head>
    <!--
        ‚ö†Ô∏è FINAL MAINTAINER NOTE - CRITICAL: READ THIS CAREFULLY ‚ö†Ô∏è
        
        FOR THE VERY LAST TIME - ALL DESIGNS MUST BE MAINTAINED:
        
        ‚úÖ The Admin HTML and App HTML MUST maintain ALL designs
        ‚úÖ EVERYTHING in the page MUST be maintained:
           - All visual designs, layouts, colors, fonts, spacing
           - All UI components, buttons, forms, cards, screens
           - All icons, emojis, images, and visual elements
           - All CSS classes, IDs, and HTML structure
           - All asset links (CSS, JS, images)
           - All offline functionality hooks
           - All responsive design breakpoints
           - All animations and transitions
           - All user interface elements and interactions
           - All language translation features
           - All navigation and screen transitions
        
        ‚ùå DO NOT modify:
           - Structure, IDs, classes, or asset links
           - Visual design elements or layouts
           - CSS styling or responsive design
           - Any offline hooks or service-worker integration
           - Any content, text, or UI elements
           - Any screen layouts or navigation flow
        
        ‚ö†Ô∏è If you need to change something, you MUST:
           1. Coordinate with the project owner
           2. Verify service-worker/cache behavior
           3. Run visual regression tests
           4. Ensure 100% offline functionality is maintained
           5. Ensure consistent UX across all devices
        
        This file is the App HTML - ALL DESIGNS MUST BE PRESERVED EXACTLY AS IMPLEMENTED.
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedFind Salone - Find Emergency Medical Services</title>
    <meta name="description" content="Offline-first emergency hospital finder for Sierra Leone">
    <link rel="stylesheet" href="app-styles.css">

    <!-- Leaflet (Local/Offline) -->
    <link rel="stylesheet" href="./assets/vendor/leaflet/leaflet_disabled.css">
    <script src="google-map-fix.js"></script>
</head>

<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
        <p class="loading-text">Loading MedFind Salone...</p>
    </div>

    <!-- Main App -->
    <div class="app" id="app" style="display: none;">
        <!-- Offline Banner -->
        <div class="offline-banner" id="offlineBanner">
            ‚ö†Ô∏è Offline Mode - Last updated: <span id="lastSyncTime">Never</span>
        </div>

        <!-- Language Selector (Top Right) -->
        <div class="language-selector">
            <button class="lang-btn active" data-lang="en">EN</button>
            <button class="lang-btn" data-lang="kr">KR</button>
        </div>

        <!-- Emergency SOS Screen -->
        <div class="screen emergency-screen" id="emergencyScreen" style="display: none;">
            <div class="emergency-content">
                <h1 class="emergency-title" data-translate="emergency_mode">üö® EMERGENCY MODE</h1>
                <div class="hospital-emergency-card">
                    <h2 id="emergencyHospitalName">Finding nearest hospital...</h2>
                    <p class="distance" id="emergencyDistance"></p>
                    <p class="address" id="emergencyAddress"></p>
                </div>
                <button class="emergency-call-btn" id="emergencyCallBtn">
                    üìû CALL NOW
                </button>
                <button class="emergency-directions-btn" id="emergencyDirectionsBtn">
                    üó∫Ô∏è GET DIRECTIONS
                </button>
                <button class="back-btn" onclick="showScreen('homeScreen')">‚Üê Back to Home</button>
            </div>
        </div>

        <!-- Home Screen -->
        <div class="screen home-screen" id="homeScreen">
            <header class="app-header">
                <img src="./assets/logo.svg" alt="MedFind Salone Logo" class="app-logo">
                <h1 class="app-title">MedFind Salone</h1>
                <p class="app-subtitle" data-translate="subtitle">Find Emergency Medical Services Offline</p>
            </header>

            <!-- SOS Button -->
            <button class="sos-button" onclick="activateEmergency()">
                <div class="sos-pulse"></div>
                <span data-translate="sos">SOS - FIND HELP NOW</span>
            </button>

            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput"
                    placeholder="Search hospitals by name, district, or services..."
                    data-translate-placeholder="search_placeholder">
                <button class="search-btn" onclick="performSearch()">üîç</button>
            </div>

            <!-- Quick Service Filters -->
            <div class="quick-services">
                <h3 class="section-title" data-translate="quick_services">Quick Services</h3>
                <div class="service-grid">
                    <button class="service-card" onclick="filterByService('emergency')">
                        <div class="service-icon">üöë</div>
                        <div class="service-name" data-translate="emergency">Emergency</div>
                    </button>
                    <button class="service-card" onclick="filterByService('maternity')">
                        <div class="service-icon">üë∂</div>
                        <div class="service-name" data-translate="maternity">Maternity</div>
                    </button>
                    <button class="service-card" onclick="filterByService('surgery')">
                        <div class="service-icon">üè•</div>
                        <div class="service-name" data-translate="surgery">Surgery</div>
                    </button>
                    <button class="service-card" onclick="filterByService('pediatrics')">
                        <div class="service-icon">üß∏</div>
                        <div class="service-name" data-translate="pediatrics">Pediatrics</div>
                    </button>
                    <button class="service-card" onclick="filterByService('pharmacy')">
                        <div class="service-icon">üíä</div>
                        <div class="service-name" data-translate="pharmacy">Pharmacy</div>
                    </button>
                    <button class="service-card" onclick="filterByService('icu')">
                        <div class="service-icon">ü©∫</div>
                        <div class="service-name">ICU</div>
                    </button>
                    <button class="service-card" onclick="showAllHospitals()">
                        <div class="service-icon">üè¢</div>
                        <div class="service-name" data-translate="all_hospitals">All Hospitals</div>
                    </button>
                </div>
            </div>

            <!-- View Toggle -->
            <div class="view-toggle">
                <button class="toggle-btn active" id="listViewBtn" onclick="switchView('list')">
                    üìã List
                </button>
                <button class="toggle-btn" id="mapViewBtn" onclick="switchView('map')">
                    üó∫Ô∏è Map
                </button>
            </div>

            <!-- Filters -->
            <div class="filters-section">
                <button class="filter-toggle" onclick="toggleFilters()">
                    ‚öôÔ∏è Advanced Filters <span id="filterCount"></span>
                </button>
                <div class="filters-panel" id="filtersPanel" style="display: none;">
                    <div class="filter-group">
                        <label class="filter-label">
                            <input type="checkbox" id="filterBeds" onchange="applyFilters()">
                            <span data-translate="beds_available">Beds Available</span>
                        </label>
                        <label class="filter-label">
                            <input type="checkbox" id="filterOxygen" onchange="applyFilters()">
                            <span data-translate="oxygen_available">Oxygen Available</span>
                        </label>
                        <label class="filter-label">
                            <input type="checkbox" id="filterSurgeons" onchange="applyFilters()">
                            <span data-translate="surgeons_on_duty">Surgeons on Duty</span>
                        </label>
                        <label class="filter-label">
                            <input type="checkbox" id="filterAmbulance" onchange="applyFilters()">
                            <span data-translate="ambulance">Ambulance Available</span>
                        </label>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label-text">District:</label>
                        <select id="filterDistrict" onchange="applyFilters()" class="filter-select">
                            <option value="">All Districts</option>
                        </select>
                    </div>
                    <button class="clear-filters-btn" onclick="clearFilters()">Clear All</button>
                </div>
            </div>

            <!-- Hospital List -->
            <div class="hospitals-container" id="hospitalsContainer">
                <div class="results-header">
                    <h3 class="section-title">
                        <span data-translate="nearby_hospitals">Nearby Hospitals</span>
                        (<span id="resultCount">0</span>)
                    </h3>
                </div>
                <div class="hospital-list" id="hospitalList">
                    <!-- Hospital cards will be inserted here -->
                </div>
            </div>

            <!-- Map View (Placeholder) -->
            <div class="map-container" id="mapContainer" style="display: none;">
                <div class="map-placeholder">
                    <p>üó∫Ô∏è Map View</p>
                    <p style="font-size: 14px; opacity: 0.7;">Interactive map would be integrated here with Mapbox GL
                    </p>
                    <p style="font-size: 12px; opacity: 0.5;">Showing <span id="mapHospitalCount">0</span> hospitals</p>
                </div>
            </div>
        </div>

        <!-- Hospital Detail Screen -->
        <div class="screen detail-screen" id="detailScreen" style="display: none;">
            <div class="detail-header">
                <button class="back-btn" onclick="showScreen('homeScreen')">‚Üê Back</button>
                <button class="favorite-btn" id="favoriteBtn" onclick="toggleFavorite()">‚≠ê</button>
            </div>

            <div class="detail-content" id="detailContent">
                <!-- Detail content will be inserted here -->
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="showScreen('homeScreen')">
                <div class="nav-icon">üè†</div>
                <div class="nav-label" data-translate="home">Home</div>
            </button>
            <button class="nav-item" onclick="showFavorites()">
                <div class="nav-icon">‚≠ê</div>
                <div class="nav-label" data-translate="favorites">Favorites</div>
            </button>
            <button class="nav-item" onclick="activateEmergency()">
                <div class="nav-icon">üö®</div>
                <div class="nav-label" data-translate="emergency">Emergency</div>
            </button>
        </nav>
    </div>


</body>

</html>